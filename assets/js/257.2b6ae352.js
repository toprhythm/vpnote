(window.webpackJsonp=window.webpackJsonp||[]).push([[257],{720:function(s,e,n){"use strict";n.r(e);var t=n(35),a=Object(t.a)({},(function(){var s=this,e=s.$createElement,n=s._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"_80-22-登录后-全选反选"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_80-22-登录后-全选反选"}},[s._v("#")]),s._v(" 80-22-登录后-全选反选")]),s._v(" "),n("blockquote",[n("p",[s._v("目标：完成有效商品的全选与反选功能")])]),s._v(" "),n("p",[s._v("大概步骤：")]),s._v(" "),n("ul",[n("li",[s._v("准备全选与反选的API接口函数")]),s._v(" "),n("li",[s._v("去完善actions，全选与反选的中的 登录 TODO 的地方")])]),s._v(" "),n("p",[s._v("落的代码：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("src/api/cart.js\n/**\n * 全选反选\n * @param {Boolean} selected - 选中状态\n * @param {Array<string>} ids - 有效商品skuId集合\n * @returns Promise\n */\nexport const checkAllCart = ({ selected, ids }) => {\n  return request('/member/cart/selected', 'put', { selected, ids })\n}\nsrc/store/modules/cart.js\n    // 做有效商品的全选&反选\n    checkAllCart (ctx, selected) {\n      return new Promise((resolve, reject) => {\n        if (ctx.rootState.user.profile.token) {\n+          // 登录 TODO\n+          const ids = ctx.getters.validList.map(item => item.skuId)\n+          checkAllCart({ selected, ids }).then(() => {\n+            return findCartList()\n+          }).then((data) => {\n+            ctx.commit('setCartList', data.result)\n+            resolve()\n+          })\n        } else {\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br")])])])}),[],!1,null,null,null);e.default=a.exports}}]);