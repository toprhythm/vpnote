(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{506:function(t,v,_){"use strict";_.r(v);var l=_(35),a=Object(l.a)({},(function(){var t=this,v=t.$createElement,_=t._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h1",{attrs:{id:"一次完成的http请求过程"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#一次完成的http请求过程"}},[t._v("#")]),t._v(" 一次完成的http请求过程")]),t._v(" "),_("h2",{attrs:{id:"题意分析"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#题意分析"}},[t._v("#")]),t._v(" 题意分析")]),t._v(" "),_("ul",[_("li",[t._v("问：当我们在web浏览器的地址栏中输入: www.baidu.com,具体发生了什么?")]),t._v(" "),_("li",[t._v("答：\n"),_("ol",[_("li",[t._v("对www.baidu.com这个网址进行DNS域名解析,得到对应的IP地址")]),t._v(" "),_("li",[t._v("根据这个IP,找到对应的服务器,发起TCP的三次握手")]),t._v(" "),_("li",[t._v("建立TCP连接后发起HTTP请求")]),t._v(" "),_("li",[t._v("服务器响应HTTP请求,浏览器得到html代码")]),t._v(" "),_("li",[t._v("浏览器解析html代码,并请求html代码中的资源(如js、cSS、图片等)(先得到html代码,才能去找这些资源)")]),t._v(" "),_("li",[t._v("浏览器对页面进行渲染呈现给用户")]),t._v(" "),_("li",[t._v("服务器关闭tcp连接")])])])]),t._v(" "),_("ol",[_("li",[t._v("注意：DNS怎么找到的域名？")])]),t._v(" "),_("blockquote",[_("p",[t._v("DNS域名解析采用的是递归查询的方式,过程是,先去找DNS缓存->缓存找不到就去找根域名服务器->根域名又会去找下一级,这样递归查找之后,找到了,给我们的web浏览器")])]),t._v(" "),_("ol",{attrs:{start:"2"}},[_("li",[t._v("为什么HTTP协议要基于TCP来实现?")])]),t._v(" "),_("blockquote",[_("p",[t._v("TCP是一个端到端的可靠的面相连接的协议,HTTP基于传输层TCP协议不用担心数据传输的各种问题(当发生错误时,会重传)")])]),t._v(" "),_("ol",{attrs:{start:"3"}},[_("li",[t._v("最后一步浏览器是如何对页面进行宣染的?")])]),t._v(" "),_("blockquote",[_("p",[t._v("a) 解析html文件构成DOM树")])]),t._v(" "),_("blockquote",[_("p",[t._v("b) 解析CSS文件构成宣染树")])]),t._v(" "),_("blockquote",[_("p",[t._v("c) 边解析 边渲染")])]),t._v(" "),_("blockquote",[_("p",[t._v("d)JS单线程运行,JS有可能修改DOM结构,意味着JS执行完成前,后续所有资源的下载是没有必要的,所以JS是单线程,会阻塞后续资源下载")])]),t._v(" "),_("p",[t._v("各个步骤具体细节:")]),t._v(" "),_("p",[t._v("DNS解析(域名解析服务器)：")]),t._v(" "),_("p",[t._v("a)首先会搜索浏览器自身的DNS缓存(缓存时间比较短,大概只有1分钟,且只能容纳1000条缓存)")]),t._v(" "),_("p",[t._v("b)如果浏览器自身的缓存里面没有找到,那么浏览器会搜索系统自身的DNS缓存")]),t._v(" "),_("p",[t._v("c)如果还没有找到,那么尝试从hosts文件里面去找")]),t._v(" "),_("p",[t._v("d)在前面三个过程都没获取到的情况下,就递归地去域名服务器去查找,具体过程如下")]),t._v(" "),_("ul",[_("li",[t._v("修改hosts文件,www.baidu.com 127.0.0.1,baidu.com  127.0.0.1, 80起一个nodejs服务器，写一个第一章页面，浏览器访问http://www.baidu.com,展示第一章页面")])]),t._v(" "),_("p",[t._v("请求过程图：\n"),_("img",{attrs:{src:"https://gitee.com/toprhythm/pic-bed/raw/master/01-javase-pics/20220306144544.png",alt:"请求过程"}})]),t._v(" "),_("ul",[_("li",[t._v("这个过程比较复杂,涉及到两个概念: reflow(回流)和repain(重绘)。")]),t._v(" "),_("li",[t._v("DOM节点中的各个元素都是以盒模型的形式存在,这些都需要浏览器去计算其位置和大小等,这个过程称为relow;当盒模型的位置,大小以及其他属性,如颜色,字体,等确定下来之后,浏览器便开始绘制内容,这个过程称为repain")]),t._v(" "),_("li",[t._v("页面在首次加载时必然会经历reflow和repaint")]),t._v(" "),_("li",[t._v("reflow和repain过程是非常消耗性能的,尤其是在移动设备上,它会破坏用户体验,有时会造成页面卡顿。所以我们应该尽可能少的减少reflow和repain。")]),t._v(" "),_("li",[t._v("JS的解析是由浏览器中的JS解析引擎完成的。")]),t._v(" "),_("li",[t._v("JS是单线程运行,JS有可能修改DOM结构,意味着JS执行完成前,后续所有资源的下载是没有必要的,所以JS是单线程,会阻塞后续资源下载。")])]),t._v(" "),_("p",[t._v("服务器关闭关闭TCP连接:")]),t._v(" "),_("ul",[_("li",[t._v("一般情况下,一旦Web服务器向浏览器发送了请求数据,它就要关闭TCP连接,然后如果浏览器或者服务器在其头信息加入了这行代码:")])]),t._v(" "),_("div",{staticClass:"language- line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("Connection: keep-alive\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br")])]),_("ul",[_("li",[_("p",[t._v("TCP连接在发送后将仍然保持打开状态,于是,浏览器可以继续通过相同的连接发送请求。\n保持连接节省了为每个请求建立新连接所需的时间,还节约了网络带宽。")])]),t._v(" "),_("li",[_("p",[t._v("自此一次完整的HTTP事务宣告完成.")])])]),t._v(" "),_("h2",{attrs:{id:"明确考察点"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#明确考察点"}},[t._v("#")]),t._v(" 明确考察点")]),t._v(" "),_("ol",[_("li",[t._v("地址栏输入url开始,域名到ip的过程")]),t._v(" "),_("li",[t._v("拿到ip,开始建立http请求")]),t._v(" "),_("li",[t._v("拿到html之后的浏览器的宣染过程")])]),t._v(" "),_("h2",{attrs:{id:"回答思路"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#回答思路"}},[t._v("#")]),t._v(" 回答思路")]),t._v(" "),_("ul",[_("li",[t._v("先说从url到拿到html的过程,然后重点阐述html的宣染过程。之后面试官再次提问的侧重回答(如:重排,重绘、tcp三次握手四次挥手)")])]),t._v(" "),_("h2",{attrs:{id:"相关扩展"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#相关扩展"}},[t._v("#")]),t._v(" 相关扩展")]),t._v(" "),_("p",[t._v("百度搜索：tcp三次握手和四次挥手")])])}),[],!1,null,null,null);v.default=a.exports}}]);