(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{515:function(t,s,a){"use strict";a.r(s);var n=a(35),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"性能优化面试题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#性能优化面试题"}},[t._v("#")]),t._v(" 性能优化面试题")]),t._v(" "),a("h2",{attrs:{id:"问题列表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题列表"}},[t._v("#")]),t._v(" 问题列表")]),t._v(" "),a("p",[t._v("初始阶段-》加载优化")]),t._v(" "),a("ol",[a("li",[t._v("首页加载慢的优化")]),t._v(" "),a("li",[t._v("优化图片的做法")]),t._v(" "),a("li",[t._v("实现webpack打包优化")]),t._v(" "),a("li",[t._v("实现cdn加速")])]),t._v(" "),a("p",[t._v("运行阶段-》渲染优化")]),t._v(" "),a("ol",[a("li",[t._v("渲染十万条数据如何造成不卡顿")])]),t._v(" "),a("h2",{attrs:{id:"学习目标"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#学习目标"}},[t._v("#")]),t._v(" 学习目标")]),t._v(" "),a("ul",[a("li",[t._v("理解前端优化中两个分类")]),t._v(" "),a("li",[t._v("了解导致前端性能问题的根本原因")]),t._v(" "),a("li",[t._v("知道一些常用的性能问题的解决方案")])]),t._v(" "),a("h2",{attrs:{id:"首屏加载慢的优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#首屏加载慢的优化"}},[t._v("#")]),t._v(" 首屏加载慢的优化")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("敲百度网址 （网页元素简单，加载稍块）")])]),t._v(" "),a("li",[a("p",[t._v("敲淘宝网址 （网页元素复杂，加满稍慢）")])]),t._v(" "),a("li",[a("p",[t._v("问题分析")]),t._v(" "),a("ol",[a("li",[t._v("首页加载图片过多")]),t._v(" "),a("li",[t._v("首页的请求量过多")]),t._v(" "),a("li",[t._v("首页请求的静态资源(HTML、CSS、JS、图片.)过大")])]),t._v(" "),a("blockquote",[a("p",[t._v("结论:所有加载慢的问题最终都可以归纳成两个问题多和大。Tips:还有网速不好和电脑太渣")])])]),t._v(" "),a("li",[a("p",[t._v("问题讲解")]),t._v(" "),a("ol",[a("li",[t._v("模拟面试对话")]),t._v(" "),a("li",[t._v("Q:面试官爸爸; A:你;")]),t._v(" "),a("li",[t._v("Q:那既然你已经知道了首页加载慢的几个原因,那我先问你首页加载图片过多怎么处理?")]),t._v(" "),a("li",[t._v("A:减少图片不就完了吗")]),t._v(" "),a("li",[t._v("如何分析:看看淘宝怎么解决")]),t._v(" "),a("li",[t._v("A:可以通过懒加载的方式来减少首屏图片的加载量")]),t._v(" "),a("li",[t._v("Q:懒加载是什么原理?")]),t._v(" "),a("li",[t._v("如何分析，查看懒加载的js库")])]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("alt")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("A lazy Image"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("data-src")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("lazy.jpg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 滚动到特定位置的时候 --\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("alt")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("A lazy image"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("  "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("lazy.jpg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("data-src")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("lazy.jpg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("ol",{attrs:{start:"9"}},[a("li",[t._v("A:懒协载原理就是监听滚动条事件,如果(滚动条距离浏览器顶部的高度===图片距离顶部的高度),那么就将data-src的值赋值到 src 上。")]),t._v(" "),a("li",[t._v("Q:那假设首页的小图片就是很多,比如有很多个小ICON怎么办?")]),t._v(" "),a("li",[t._v("如何分析，看看淘宝")])]),t._v(" "),a("ul",[a("li",[t._v("对于纯色系小图标用iconfont来解决\n"),a("ul",[a("li",[t._v("设置font-family的css属性")])])]),t._v(" "),a("li",[t._v("对于一些彩色的小图片可以使用雪碧图（精灵图）\n"),a("ul",[a("li",[t._v("把所有小图片拼接在一张大图上")]),t._v(" "),a("li",[t._v("并且使用background-position的\ncss属性来修改图片坐标")])])])]),t._v(" "),a("ol",{attrs:{start:"12"}},[a("li",[t._v("A:可以分别使用iconfont和雪碧图来处理小图标和小图片")])]),t._v(" "),a("blockquote",[a("p",[t._v("总结\n首页加载图片过多的问题,可以通过以下几种方法解决:\n1.通过懒加载的方式处理非首屏的图片")])]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[t._v("对于纯色小图标可以采用iconfont的方式解决")]),t._v(" "),a("li",[t._v("对于小图片采用雪碧图（精灵图）方式解决")])])])]),t._v(" "),a("hr"),t._v(" "),a("ul",[a("li",[a("p",[t._v("Q:首页的请求量过多怎么解决?")])]),t._v(" "),a("li",[a("p",[t._v("如何分析： 先通过工具来确定是哪些类型的资源请求过多")])]),t._v(" "),a("li",[a("p",[t._v("通过浏览器的Network可以确定首页加载的资源和请求量")]),t._v(" "),a("ol",[a("li",[t._v("requests 请求数量")]),t._v(" "),a("li",[t._v("resources:前端资源总大小")]),t._v(" "),a("li",[t._v("DOMContentLoaded:浏览器已经完全加载了HTML,其他静态资源(JS, CSS,图片等)并没有下载完毕(能看,不能用)")]),t._v(" "),a("li",[t._v("Load: 浏览器已经加载了所有的静态资源(能用了)")])])]),t._v(" "),a("li",[a("p",[t._v("通过f12-三个点-more tools - converge来查看代码的使用状况")]),t._v(" "),a("ol",[a("li",[t._v("只针对JS和CSS")]),t._v(" "),a("li",[t._v("可以看出哪些代码虽然加载了但是没有执行")]),t._v(" "),a("li",[t._v("没有执行的代码可以考虑一下是否可以懒加载?")])])]),t._v(" "),a("li",[a("p",[a("img",{attrs:{src:"https://gitee.com/toprhythm/pic-bed/raw/master/01-javase-pics/20220310094546.png",alt:"f12network"}})])]),t._v(" "),a("li",[a("p",[t._v("A:可以通过减少资源的请求量")]),t._v(" "),a("ul",[a("li",[t._v("通过nginx服务器(可用来做CDN,用来处理静态资源)来做资源文件合并combo--将多个JavaScript、")]),t._v(" "),a("li",[t._v("CSS文件合并成一个")]),t._v(" "),a("li",[t._v("扩展:日常企业项目中服务器按照功能区分:\n"),a("ul",[a("li",[t._v("应用服务器:服务端语言运行的服务器(Java, NodeJS...)放淘宝应用的位置")]),t._v(" "),a("li",[t._v("数据库服务器:放数据库的服务器")]),t._v(" "),a("li",[t._v("存储服务器:放大型文件的服务器(例如各种网盘)")]),t._v(" "),a("li",[t._v("CDN服务器:放静态资源的服务器(JS, CSS,图片,字体.)")])])]),t._v(" "),a("li",[t._v("通过打包工具(Webpack)来做资源文件的物理打包(相对没有第一种灵活)")])])]),t._v(" "),a("li",[a("p",[t._v("Q:只有通过合并静态资源的方式才能减少资源请求量吗?")])]),t._v(" "),a("li",[a("p",[t._v("https://github.com/alibaba/nginx-http-concat")])]),t._v(" "),a("li",[a("p",[t._v("http://www.taobao.com/a.js,b.js,c.js // 返回abcjs的集合单文件，也可以单独访问http://www.taobao.com/a|b|c.js")])]),t._v(" "),a("li",[a("p",[t._v("如何分析")]),t._v(" "),a("ul",[a("li",[t._v("除了从资源层面来解决问题,还可以从我们自己写的代码本身来考虑。")]),t._v(" "),a("li",[t._v("对于引入的一些比较大型的第三方库,比如组件库(antd, element-ui) ,函数库(lodash)等,务必设定按需加载。Tips:一般都是用Babel插件来实现的")]),t._v(" "),a("li",[t._v("可以通过前端路由懒加载的方式(只限于SPA应用)\n"),a("ul",[a("li",[t._v("使用React lazy进行动态路由的加载(React 16.6 以上版本才可以使用React lazy)")]),t._v(" "),a("li",[t._v("演示React lazy 的使用")])])])])]),t._v(" "),a("li",[a("p",[t._v("A:当然不是,还可以从代码层面的优化,比如说:")]),t._v(" "),a("ul",[a("li",[t._v("如果在项目中引入了比较大型的第三方库,那就可以通过特定的Babel插件来进行按需加载")]),t._v(" "),a("li",[t._v("在路由层面也可以使用React lazy进行动态路由的加载,从而可以减少首页的JS和CSS的大小")])])]),t._v(" "),a("li",[a("p",[t._v("Q:那我问你为什么React lazy可以进行动态路由的加载?")])]),t._v(" "),a("li",[a("p",[t._v("如何分析:先看看使用方式 router.js")])])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" lazy "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" routes "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("compoennt")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("lazy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../containers/Home'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("expect")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 路由严格匹配")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("ul",[a("li",[a("p",[t._v("import('xxx') 返回的是- Promise")])]),t._v(" "),a("li",[a("p",[t._v("Webpack 只要遇到了 import(\"xxx'),就会把括号里引入的内容单独打一个包")])]),t._v(" "),a("li",[a("p",[t._v("A: 首先React lazy 是使用了 dynamic import 的标准, webpack 只要遇到了 dynamic import,就会把里面引入的内容单独打一个包。由于dynamic import 返回的是一个Promise,所以可以使用Promise的状态来做宣染的流程控制。如果当前Promise 是 pending状态,那么就演染Loading 组件,如果Promise是resolve状态那么就宣染动态导入的组件。")])]),t._v(" "),a("li",[a("p",[t._v("f12js路由懒加载,很棒的")])]),t._v(" "),a("li",[a("p",[t._v("总结")]),t._v(" "),a("ol",[a("li",[t._v("通过nginx服务器来做资源文件的合并或者通过Webpack等打包工具进行物理打包")]),t._v(" "),a("li",[t._v("在代码层面,对于需要引入一些大型第三方库的时候,可以通过特定的Babel插件来进行按需加载")]),t._v(" "),a("li",[t._v("还有可以使用React lazy或其他动态导入方案来进行前端路由层面的动态加载,从而可以减少首页的JS和CSS的大小")])])])]),t._v(" "),a("hr"),t._v(" "),a("ul",[a("li",[a("p",[t._v("Q:首页请求的资源(CSS,Js、图片)过大怎么解决?")])]),t._v(" "),a("li",[a("p",[t._v("A:把资源变小不就完了吗?")])]),t._v(" "),a("li",[a("p",[t._v("怎么变小?")])]),t._v(" "),a("li",[a("p",[t._v("A:")]),t._v(" "),a("ol",[a("li",[t._v("要分资源文件,yCSS, JS,图片等要分开来处理")]),t._v(" "),a("li",[t._v("CSS和JS可以通过Webpack来进行混淆和压缩(下个题目讲)混淆:将JS代码进行字符串加密(最大层度减少代码,比如将长变量名变成单个字母等等)压缩:去除注释空行以及console.log等调试代码")]),t._v(" "),a("li",[t._v("图片也可以进行压缩(下个题目讲)1.可以通过自动化工具来压缩图片;2.对图片进行转码->base64格式;3:使用WebP 格式;")]),t._v(" "),a("li",[t._v("通过开启gzip进行全部资源压缩1.gzip:是一种压缩文件格式,可以对任何文件进行压缩(类比于文件压缩); 2: 可以通过nginx服务器的配置项进行开启(演示/usr/local/etc/nginx); 就一行代码解开注释 nginx.conf:  gzip on; 重启nginx,刷新页面")])])]),t._v(" "),a("li",[a("p",[t._v("答题思路")])])]),t._v(" "),a("h2",{attrs:{id:"优化图片的做法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#优化图片的做法"}},[t._v("#")]),t._v(" 优化图片的做法")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("问题分析")]),t._v(" "),a("ol",[a("li",[t._v("减少图片的请求-可懒加载图片")]),t._v(" "),a("li",[t._v("减少图片的大小")])])]),t._v(" "),a("li",[a("p",[t._v("问题讲解")]),t._v(" "),a("ol",[a("li",[t._v("Q:好,那你刚刚说可以使用自动化工具对图片进行压缩,你是使用什么工具?")]),t._v(" "),a("li",[t._v("A:用熊猫站不就完了吗?如何分析:熊猫站:智能压缩PNG 和JPG的一个网站;1.可以对图片进行"),a("strong",[t._v("等比例无损压缩")]),t._v(" tinypng.com")]),t._v(" "),a("li",[t._v("Q:那你认为为什么这个工具可以同比例无损压缩?")]),t._v(" "),a("li",[t._v('A:如何分析:通过相似颜色“量化"的技术来减少颜色数量,并且可以将24位的PNG文件转化成8位的彩色图片。同时可以将不必要的元数据进行剥离。人话:通过减少颜色的数量以及不必要的数据来实现文件压缩;')]),t._v(" "),a("li",[t._v("A:通过减少颜色的数量以及不必要的数据来实现文件压缩")]),t._v(" "),a("li",[t._v("Q:非常nice,但是这是方式不是有一个问题?难道每当我需要处理图片的时候,就要进入这个网站去上传一下吗?这样不仅仅效率低,还不安全。")]),t._v(" "),a("li",[t._v("A:熊猫站很佛系的,把图片压缩的技术开源出来的,他们把图片压缩工具开放出来了。可以使用npm安装开源包,就可以在我们本地进行图片压缩啦 npm i -S tinify")]),t._v(" "),a("li",[t._v("Q:那除了这个方式还有什么其他的方式来优化图片吗?")]),t._v(" "),a("li",[t._v("webpack->对图片进行转码->base64格式")]),t._v(" "),a("li",[t._v("A:可以使用Webpack的url-loader 进行图片策略配置,将小图转换成base64格式,因为base64 格式的图片的作用是减少资源的数量,但是base64格式的图片会增大原有图片的体积")]),t._v(" "),a("li",[t._v("A:还有一种方式就是使用webp格式的图片: 图片格式有很多种, PNG、JPG、GIF,还有新的WebP格式,WebP 的优势:根据Google的测试,同等条件等比例无损压缩后的WebP 比 PNG文件少了26%的体积。并且图片越多,压缩后的体积优势越明显,压缩率比较, JPG vs WebP")])])]),t._v(" "),a("li",[a("p",[t._v("答题思路")])]),t._v(" "),a("li",[a("p",[t._v("图片的优化,也是从两个方面来考虑:太多和太大。")]),t._v(" "),a("ol",[a("li",[t._v("可以通过懒加载减少图片的请求,或者通过雪碧图来合并图片,以及将小图转化成base64的格式,来解决多的问题。")]),t._v(" "),a("li",[t._v("图片大的问题,可以通过自动化压缩工具来压缩图片,或者使用WebP格式的图片。")])])])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"实现webpack打包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实现webpack打包"}},[t._v("#")]),t._v(" 实现webpack打包")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("问题分析")])]),t._v(" "),a("li",[a("p",[t._v("Q:我问你,怎么使用Webpack进行打包优化?")])]),t._v(" "),a("li",[a("p",[t._v("A:少和小")])]),t._v(" "),a("li",[a("p",[t._v("Q:怎么样少,怎么样小")])]),t._v(" "),a("li",[a("p",[t._v("如何分析")]),t._v(" "),a("ol",[a("li",[t._v("少->使用Webpack进行物理打包。")]),t._v(" "),a("li",[t._v("小->使用Webpack 进行混滑和压缩,所有与Webpack优化相关的配置都是在optimization这个理。")]),t._v(" "),a("li",[t._v("从webpack 4开始,会根据你选择的mode来执行不同的优化,不过所有的优化还是可以手动")]),t._v(" "),a("li",[t._v("development:不混淆,不压缩,不优化")]),t._v(" "),a("li",[t._v("production:混淆+压缩,自动内置优化")]),t._v(" "),a("li",[t._v("结论:只需要将mode改成 production即可")])])]),t._v(" "),a("li",[a("p",[t._v("A:使用Webpack对代码进行混涌和压缩,并且可以使用React lazy进行拆包,结合路由进行按需加载。")])]),t._v(" "),a("li",[a("p",[t._v("Q:那这里是不是有个问题?既然你对文件进行拆包处理,那么肯定会造成文件变多,是不是有矛盾?")])]),t._v(" "),a("li",[a("p",[t._v("A:其实不冲突,因为拆包后的文件,不可能同时加载的,所以就不会造成同一时间资源请求过多的请求。")]),t._v(" "),a("ul",[a("li",[t._v("但是要注意打包策略")]),t._v(" "),a("li",[t._v("我们通常会把包,分为两类")]),t._v(" "),a("li",[t._v("第三方包(node_modules里面的)")]),t._v(" "),a("li",[t._v("自己实现的代码(src目录里面的)")]),t._v(" "),a("li",[t._v("所以我们可以把第三方包打一个包,公共的代码打一个包,非公共的代码打一个包。")]),t._v(" "),a("li",[t._v("第三方包:改动频率-小")]),t._v(" "),a("li",[t._v("公共代码包 改动频率-中")]),t._v(" "),a("li",[t._v("非公共代码包，改动频率-高")])])]),t._v(" "),a("li",[a("p",[t._v("所以可以将打包策略结合网络缓存来做优化")]),t._v(" "),a("ul",[a("li",[t._v("对于不需要经常变动的资源(第三方包),可以使用Cache-Control: max-age=31536000(缓存一年)并配合协商缓存ETag使用(一旦文件名变动才会下载新的文件)")]),t._v(" "),a("li",[t._v("对于需要频繁变动的资源(代码包),可以使用Cache-Control: no-cache并配合ETag使用,表示该资源已被缓存,但是每次都会发送请求询问资源是否更新。")])])]),t._v(" "),a("li",[a("p",[t._v("A:其实不冲突,因为拆包后的文件,不可能同时加载的,所以就不会造成同一时间资源请求过多的请求。但是可以使用Webpack的 optimization.splitChunks 进行打包策略的优化。将node_modules 单独打包,以及将自己实现的代码也可以分为公共包和非公共包,并且分开打包。")])]),t._v(" "),a("li",[a("p",[t._v("最后还可以结合网络缓存来做加载性能优化。")])]),t._v(" "),a("li",[a("p",[t._v("问题讲解")])]),t._v(" "),a("li",[a("p",[t._v("答题思路")])]),t._v(" "),a("li",[a("p",[t._v("Webpack 打包优化,也是从两个方面来考虑:太多和太大。")]),t._v(" "),a("ol",[a("li",[t._v("可以通过设置mode= production来默认实现Webpack对代码的混淆和压缩,从而最大程度的减少代码体积")]),t._v(" "),a("li",[t._v("使用Webpack + dynamic import 并结合路由的入口文件做拆包处理")]),t._v(" "),a("li",[t._v("并且可以设定一些打包策略,并配合网络缓存做最终的加载性能优化。")])])])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"实现cdn加速"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实现cdn加速"}},[t._v("#")]),t._v(" 实现CDN加速")]),t._v(" "),a("ul",[a("li",[t._v("问题分析")]),t._v(" "),a("li",[t._v("cdn是nginx实现的")])]),t._v(" "),a("ol",[a("li",[t._v("什么叫做cdn，内容分发网络")]),t._v(" "),a("li",[t._v("为什么cdn可以实现加速")])]),t._v(" "),a("ul",[a("li",[t._v("问题讲解\n"),a("ul",[a("li",[t._v("为什么cdn可以实现加速")])])])]),t._v(" "),a("p",[t._v("图：\n"),a("img",{attrs:{src:"https://gitee.com/toprhythm/pic-bed/raw/master/01-javase-pics/20220310105827.png",alt:"cdn"}})]),t._v(" "),a("ul",[a("li",[t._v("游戏分区:北京一区,上海一区,广东一区..")]),t._v(" "),a("li",[t._v("Tips: CDN服务器就是在你家门口放一台服务器,把所有的静态资源都同步到你家门口这台服务器上,以后只要你访问这个网站,都直接从这台服务器上下载静态资源。")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/toprhythm/pic-bed/raw/master/01-javase-pics/20220310110124.png",alt:"图"}})]),t._v(" "),a("ul",[a("li",[a("p",[t._v("扩展: Http2.0: 引入了多路复用的机制,可以最大化发送请求数量。")])]),t._v(" "),a("li",[a("p",[t._v("答题思路")]),t._v(" "),a("ul",[a("li",[t._v("CDN服务器主要是用来放静态资源的服务器,可以用来加速静态资源的下载")]),t._v(" "),a("li",[t._v("CDN之所以能够加速,是因为会在很多地方都部署CDN服务器,如果用户需要下载静态资源,会自动选择最近的节点下载")]),t._v(" "),a("li",[t._v("同时由于CDN服务器的地址一般都跟主服务器的地址不同,所以可以破除浏览器对同一个域名发送请求的限制")])])])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"如何渲染十万条数据不卡顿"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何渲染十万条数据不卡顿"}},[t._v("#")]),t._v(" 如何渲染十万条数据不卡顿")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("问题分析")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("为什么演染很多条数据会造成浏览器卡顿")])]),t._v(" "),a("li",[a("p",[t._v("怎么优化长列表的情况")])])])]),t._v(" "),a("li",[a("p",[t._v("问题讲解\n"),a("img",{attrs:{src:"https://gitee.com/toprhythm/pic-bed/raw/master/01-javase-pics/20220310110602.png",alt:"123"}})])]),t._v(" "),a("li",[a("p",[t._v("结论")]),t._v(" "),a("ol",[a("li",[t._v("1.无论是浏览器中的DOM和BOM,还是NodeJs,它们都是基于JavaScript引擎之上开发出来的")]),t._v(" "),a("li",[t._v("DOM 和BOM的处理最终都是要被转换成JavaScript引擎能够处理的数据")]),t._v(" "),a("li",[t._v("这个转换的过程很耗时")]),t._v(" "),a("li",[t._v("所以在浏览器中最消耗性能的就是操作DOM,为什么vue里有虚拟dom，就是为什么减少操作dom")])])]),t._v(" "),a("li",[a("p",[t._v("怎么优化很多数据的情况?")]),t._v(" "),a("ol",[a("li",[t._v("指导原则:尽可能的减少DOM的操作")])])]),t._v(" "),a("li",[a("p",[t._v("eg:假如有一个需求,我们要在一个页面中ul标签里演染十万个li标签。")])]),t._v(" "),a("li",[a("p",[t._v("十万优化前代码:")])])]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token doctype"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<!")]),a("span",{pre:!0,attrs:{class:"token doctype-tag"}},[t._v("DOCTYPE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token name"}},[t._v("html")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("en"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("head")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("charset")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("UTF-8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("http-equiv")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("X-UA-Compatible"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("content")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("IE=edge"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("viewport"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("content")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("width=device-width, initial-scale=1.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("title")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Document"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("title")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("head")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("ul")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("ul")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token script"}},[a("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 监听dom是否渲染完毕")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" stateCheck "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInterval")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      \n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("readyState "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'complete'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearInterval")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("stateCheck"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("timeEnd")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("time")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 插入十万条数据")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" total "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100000")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" ul "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ul'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//111.创建虚拟节点, 使用 createDocumentFragment 不会触发演染")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fragment "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createDocumentFragment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2. 循环十万条")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" total"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" li "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'li'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        li"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerText "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("floor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("random")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" total"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        fragment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3. 最后把虚拟节点appedn到ul上")]),t._v("\n      ul"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fragment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// default: 4100.618896484375 ms 4秒")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  ")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br"),a("span",{staticClass:"line-number"},[t._v("32")]),a("br"),a("span",{staticClass:"line-number"},[t._v("33")]),a("br"),a("span",{staticClass:"line-number"},[t._v("34")]),a("br"),a("span",{staticClass:"line-number"},[t._v("35")]),a("br"),a("span",{staticClass:"line-number"},[t._v("36")]),a("br"),a("span",{staticClass:"line-number"},[t._v("37")]),a("br"),a("span",{staticClass:"line-number"},[t._v("38")]),a("br"),a("span",{staticClass:"line-number"},[t._v("39")]),a("br"),a("span",{staticClass:"line-number"},[t._v("40")]),a("br"),a("span",{staticClass:"line-number"},[t._v("41")]),a("br"),a("span",{staticClass:"line-number"},[t._v("42")]),a("br"),a("span",{staticClass:"line-number"},[t._v("43")]),a("br"),a("span",{staticClass:"line-number"},[t._v("44")]),a("br")])]),a("ul",[a("li",[a("p",[t._v("优化前结果:\n"),a("img",{attrs:{src:"https://gitee.com/toprhythm/pic-bed/raw/master/01-javase-pics/20220310114124.png",alt:"before"}})])]),t._v(" "),a("li",[a("p",[t._v("十万优化后代码")])])]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token doctype"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<!")]),a("span",{pre:!0,attrs:{class:"token doctype-tag"}},[t._v("DOCTYPE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token name"}},[t._v("html")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("en"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("head")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("charset")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("UTF-8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("http-equiv")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("X-UA-Compatible"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("content")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("IE=edge"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("viewport"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("content")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("width=device-width, initial-scale=1.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("title")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Document"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("title")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("head")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("ul")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("ul")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token script"}},[a("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 监听dom是否渲染完毕")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" stateCheck "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInterval")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("readyState "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'complete'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearInterval")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("stateCheck"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("timeEnd")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("time")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 插入十万条数据")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" total "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100000")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" ul "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ul'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 懒加载思路 分段渲染")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1. 一次渲染一屏幕的量")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" once "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2. 全部渲染完需要多少次，循环的时候要用")]),t._v("\n    loopCount "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" total "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" once "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 100000 / 20 = 5000（次）")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3. 已经渲染了多少次")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" countRendered "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//111.创建虚拟节点, 使用 createDocumentFragment 不会触发演染")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fragment "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createDocumentFragment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2. 循环20次")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" once"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" li "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'li'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        li"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerText "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("floor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("random")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" total"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        fragment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("li"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3. 最后把虚拟节点appedn到ul上")]),t._v("\n      ul"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fragment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// default: 4100.618896484375 ms 4秒")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 4. 已经渲染的次数+=1")]),t._v("\n      countRendered "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("loop")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 递归")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 最重要的部分来了")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("loop")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1. 如果还没渲染完，就继续使用requestAnimationFrame渲染 ")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("countRendered "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" loopCount"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*5000*/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// window.requestAnimationFrame(add)")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// requestAnimationFrame等价于  setTimeout(add, 16)")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("add"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("loop")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// default: 100.35888671875 ms 十分之一秒加载完毕")]),t._v("\n\n  ")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br"),a("span",{staticClass:"line-number"},[t._v("32")]),a("br"),a("span",{staticClass:"line-number"},[t._v("33")]),a("br"),a("span",{staticClass:"line-number"},[t._v("34")]),a("br"),a("span",{staticClass:"line-number"},[t._v("35")]),a("br"),a("span",{staticClass:"line-number"},[t._v("36")]),a("br"),a("span",{staticClass:"line-number"},[t._v("37")]),a("br"),a("span",{staticClass:"line-number"},[t._v("38")]),a("br"),a("span",{staticClass:"line-number"},[t._v("39")]),a("br"),a("span",{staticClass:"line-number"},[t._v("40")]),a("br"),a("span",{staticClass:"line-number"},[t._v("41")]),a("br"),a("span",{staticClass:"line-number"},[t._v("42")]),a("br"),a("span",{staticClass:"line-number"},[t._v("43")]),a("br"),a("span",{staticClass:"line-number"},[t._v("44")]),a("br"),a("span",{staticClass:"line-number"},[t._v("45")]),a("br"),a("span",{staticClass:"line-number"},[t._v("46")]),a("br"),a("span",{staticClass:"line-number"},[t._v("47")]),a("br"),a("span",{staticClass:"line-number"},[t._v("48")]),a("br"),a("span",{staticClass:"line-number"},[t._v("49")]),a("br"),a("span",{staticClass:"line-number"},[t._v("50")]),a("br"),a("span",{staticClass:"line-number"},[t._v("51")]),a("br"),a("span",{staticClass:"line-number"},[t._v("52")]),a("br"),a("span",{staticClass:"line-number"},[t._v("53")]),a("br"),a("span",{staticClass:"line-number"},[t._v("54")]),a("br"),a("span",{staticClass:"line-number"},[t._v("55")]),a("br"),a("span",{staticClass:"line-number"},[t._v("56")]),a("br"),a("span",{staticClass:"line-number"},[t._v("57")]),a("br"),a("span",{staticClass:"line-number"},[t._v("58")]),a("br"),a("span",{staticClass:"line-number"},[t._v("59")]),a("br"),a("span",{staticClass:"line-number"},[t._v("60")]),a("br"),a("span",{staticClass:"line-number"},[t._v("61")]),a("br"),a("span",{staticClass:"line-number"},[t._v("62")]),a("br"),a("span",{staticClass:"line-number"},[t._v("63")]),a("br"),a("span",{staticClass:"line-number"},[t._v("64")]),a("br"),a("span",{staticClass:"line-number"},[t._v("65")]),a("br"),a("span",{staticClass:"line-number"},[t._v("66")]),a("br"),a("span",{staticClass:"line-number"},[t._v("67")]),a("br")])]),a("ul",[a("li",[a("p",[t._v("优化后结果\n"),a("img",{attrs:{src:"https://gitee.com/toprhythm/pic-bed/raw/master/01-javase-pics/20220310114242.png",alt:"优化后"}})])]),t._v(" "),a("li",[a("p",[t._v("结论：")]),t._v(" "),a("ol",[a("li",[t._v("可以使用 document.createDocumentFragment 创建虚拟节点,从而避免引起没有必要的渲染")]),t._v(" "),a("li",[t._v("当所有的li都创建完毕后,一次性把虚拟节点里的li标签全部宣染出来")]),t._v(" "),a("li",[t._v("可以采取分段宣染的方式,比如一次只宣染一屏的数据")]),t._v(" "),a("li",[t._v("最后使用 window.requestAnimationFrame来逐帧渲染")])])]),t._v(" "),a("li",[a("p",[t._v("答题思路")])]),t._v(" "),a("li",[a("p",[t._v("silu")]),t._v(" "),a("ol",[a("li",[t._v("导致浏览器卡顿的原因一般都是操作DOM的次数太频繁。")]),t._v(" "),a("li",[t._v("如果想要宣染很多条数据不造成卡顿,那么就一定要尽可能的减少操作DOM的次数。")]),t._v(" "),a("li",[t._v("比方说React的虚拟DOM,本质上就是用JS数据来模拟真实DOM树,从而大大减少了操作真是DOM的次数。")])])]),t._v(" "),a("li",[a("p",[t._v("课程总结")]),t._v(" "),a("ol",[a("li",[t._v("在前端中性能优化的点主要分为两个阶段:")]),t._v(" "),a("li",[t._v("1.初始阶段,主要就是加载方面优化的问题。所有问题的指导原则就两点:")]),t._v(" "),a("li",[t._v("尽可能的减少前端资源的数量,")]),t._v(" "),a("li",[t._v("尽可能的减小前端资源的大小")]),t._v(" "),a("li",[t._v("运行阶段,主要就是演染方面优化的问题。只要是在浏览器中,所有的问题的指导原则就是:")]),t._v(" "),a("li",[t._v("尽可能的减少操作DOM")])])])])])}),[],!1,null,null,null);s.default=e.exports}}]);